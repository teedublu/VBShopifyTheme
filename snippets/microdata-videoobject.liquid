{%- assign video_object = section.settings.video.sources | where: 'format', 'mp4' | first -%}
{%- assign content_url = video_object.url -%}
{%- assign youtube_id = section.settings.youtube_id -%}
{%- assign audiobook = product.metafields.book.audiobook -%}

{
  "@context": "https://schema.org",
  "@type": "VideoObject",
  "name": {{ product.title | prepend: 'Video of ' | json }},
  "description": "{{ product.description | strip_html | escape | strip_newlines }}",
  "thumbnailUrl": [
    "https://img.youtube.com/vi/{{ youtube_id }}/default.jpg",
    "https://img.youtube.com/vi/{{ youtube_id }}/sddefault.jpg",
    "https://img.youtube.com/vi/{{ youtube_id }}/mqdefault.jpg",
    "https://img.youtube.com/vi/{{ youtube_id }}/maxresdefault.jpg"
  ],
  "uploadDate": "2022-08-31T08:00:00+08:00",
  "contentUrl": "{{ content_url }}",
  {%- if youtube_id -%}
    "embedUrl": "https://www.youtube.com/embed/{{ youtube_id }}",
  {%- endif -%}
  "publisher": {%- render 'microdata-publisher-snippet' -%},

  "encodesCreativeWork": {
    "@type": "Audiobook",
    "name": {{ product.title | json }}
  }
}