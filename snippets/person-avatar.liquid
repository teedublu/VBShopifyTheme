<div class="person-image" style="border-radius: {{ radius }}%; height:{{ max_width }}px; width: {{ max_width }}px; overflow:hidden; background: {{ avatar_bg_color }}; display: flex; align-items: center; justify-content: center;">
  {% case avatar_display %}
    {% when 'image' %}
      {% if metaobject.photos.value != blank %}
        {{ metaobject.photos.value | first | image_url: width: max_width | image_tag: alt: object.title.value | escape }}
      {% else %}
        {{ 'image' | placeholder_svg_tag: 'placeholder' }}
      {% endif %}
    {% when 'initials' %}
      <span style="
        color: {{ initials_color }};
        font-size: {{ initials_font_size }}%;
        font-weight: 700;
        font-family: sans-serif;
        letter-spacing: 2px;
        user-select: none;
        ">
        {% assign name_parts = metaobject.name | split: ' ' %}
        {% assign first_initial = name_parts[0] | slice: 0, 1 | upcase %}
        {% assign second_initial = '' %}
        {% if name_parts.size > 1 %}
          {% assign second_initial = name_parts[1] | slice: 0, 1 | upcase %}
        {% endif %}
        {% assign initials = first_initial | append: second_initial %}
        
        {{ initials | default: 'AB' }}

      </span>
    {% when 'placeholder' %}
      <svg aria-hidden="true" focusable="false" role="presentation"
           viewBox="0 0 40 40" width="100%" height="100%">
        <circle cx="20" cy="20" r="20" fill="none"/>
        <path
          d="M20 21c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7Zm0 2c-4.418 0-13 2.239-13 6.667V33h26v-3.333C33 25.239 24.418 23 20 23Z"
          fill="#fff" fill-opacity="0.5"/>
      </svg>
    {% else %}
      <span style="color: #fff; font-size: 72px;">?</span>
  {% endcase %}
</div>
