{%- render 'section-spacing-collapsing' -%}

{%- comment -%}
------------------------------------------------------------------------------------------------------------------------
CSS
------------------------------------------------------------------------------------------------------------------------
{%- endcomment -%}
<style>

.scroll-container {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  gap: 20px;
  padding: 20px;
  justify-content: flex-start;
}

.block {
  display: grid; /* Using grid layout */
  grid-template-rows: auto 1fr; /* Define rows for image and text */
  width: 90px; /* Fixed width */
  height: 90px; /* Fixed height */
  flex-shrink: 0;
  text-align: center;
  background-color: #f0f0f0; /* Example background color for visibility */
  align-items: center; /* Align items vertically */
}

.block img {
  width: 100%; /* Image fills the width of the block */
  height: 60px; /* Maintain aspect ratio */
  object-fit: cover; /* Ensures the image covers the area, cropping as needed */
}

.block span {
  font-size: 12px; /* Adjust based on your design needs */
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Centering blocks container on desktop */
@media (min-width: 675px) {
  .scroll-container {
    justify-content: center; /* Resets to default alignment for scrolling */
    overflow-x: auto; /* Ensure scrolling is enabled */
    width: auto; /* Allow container width to be determined by its content */
    margin: 0 auto; /* Center the container */
    max-width: 100%; /* Prevents the container from exceeding the viewport width */
  }
}


/* Add other styles back in incrementally to find what might be causing the issue */


</style>

{%- comment -%}
------------------------------------------------------------------------------------------------------------------------
LIQUID
------------------------------------------------------------------------------------------------------------------------
{%- endcomment -%}

<div>

  <div class="scroll-container">
    {% for block in section.blocks %}
    <a href="#" class="block">
      {% if block.settings.image %}
        <img src="{{ block.settings.image | img_url: '300x300' }}" alt="{{ block.settings.heading }}">
      {% endif %}
      <span>{{ block.settings.link_text }}</span>
    </a>
    {% endfor %}


</div>

</div>
{% schema %}
{
  "name": "Collection link blocks",
  "class": "shopify-section--collection-link-blocks",
  "tag": "section",
  "disabled_on": {
    "templates": ["password"],
    "groups": ["header", "custom.overlay"]
  },
  "blocks": [
    {
      "type": "item",
      "name": "Link block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "1200 x 1400px .jpg recommended"
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Link text"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        },
        {
          "type": "header",
          "content": "Colors",
          "info": "Overlay is ignored when \"Stretch to fill\" is disabled."
        },
        {
          "type": "color",
          "id": "background",
          "label": "Background"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "overlay_color",
          "label": "Overlay",
          "default": "#000000"
        },
        {
          "type": "range",
          "id": "overlay_opacity",
          "label": "Overlay opacity",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "default": 0
        }

      ]
    }
  ],
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width",
      "default": false
    },
    {
      "type": "select",
      "id": "block_size",
      "label": "Block size",
      "options": [
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        }
      ],
      "default": "small"
    },

    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link text"
    },
    {
      "type": "header",
      "content": "Colors",
      "info": "Gradient replaces solid colors when set."
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background"
    },
    {
      "type": "color_background",
      "id": "background_gradient",
      "label": "Background gradient"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color"
    },
    {
      "type": "color_background",
      "id": "heading_gradient",
      "label": "Heading gradient"
    }
  ],
  "presets": [
    {
      "name": "Collection link blocks",
      "blocks": [
        {
          "type": "item"
        },
        {
          "type": "item"
        },
        {
          "type": "item"
        },
        {
          "type": "item"
        }
      ]
    }
  ]
}
{% endschema %}